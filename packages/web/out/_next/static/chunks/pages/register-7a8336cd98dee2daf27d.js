(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{134:function(e,r,n){"use strict";n.d(r,{l4:function(){return j},UE:function(){return w}});var t=n(7243),i=n(6743),a=n(5083),o=n(3501),s=n(7147);function c(){var e=(0,i.Z)(["\n    query Me {\n  me {\n    ...UserFragment\n  }\n}\n    ",""]);return c=function(){return e},e}function u(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(){var e=(0,i.Z)(["\n    mutation Register($input: RegisterInput!) {\n  register(input: $input) {\n    ...RegistrationFragment\n  }\n}\n    ",""]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n    fragment RegistrationFragment on RegistrationResponse {\n  ok\n  errors {\n    ...ErrorFragment\n  }\n  user {\n    ...UserFragment\n  }\n}\n    ","\n",""]);return p=function(){return e},e}function d(){var e=(0,i.Z)(["\n    fragment UserFragment on User {\n  id\n  username\n}\n    "]);return d=function(){return e},e}function m(){var e=(0,i.Z)(["\n    fragment ErrorFragment on FieldError {\n  field\n  message\n}\n    "]);return m=function(){return e},e}var g={},b=(0,a.Ps)(m()),h=(0,a.Ps)(d()),v=(0,a.Ps)(p(),b,h),y=(0,a.Ps)(f(),v);function j(e){var r=l(l({},g),e);return o.D(y,r)}var O=(0,a.Ps)(c(),h);function w(e){var r=l(l({},g),e);return s.a(O,r)}},7053:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return A}});var t=n(2322),i=n(2784),a=n(6942),o=n(5083),s=function(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e},c=(0,o.Ps)(f||(f=s(["\n  fragment ErrorFragment on FieldError {\n    field\n    message\n  }\n"],["\n  fragment ErrorFragment on FieldError {\n    field\n    message\n  }\n"]))),u=(0,o.Ps)(p||(p=s(["\n  fragment UserFragment on User {\n    id\n    username\n  }\n"],["\n  fragment UserFragment on User {\n    id\n    username\n  }\n"]))),l=(0,o.Ps)(d||(d=s(["\n  fragment RegistrationFragment on RegistrationResponse {\n    ok\n    errors {\n      ...ErrorFragment\n    }\n    user {\n      ...UserFragment\n    }\n  }\n  ","\n  ","\n"],["\n  fragment RegistrationFragment on RegistrationResponse {\n    ok\n    errors {\n      ...ErrorFragment\n    }\n    user {\n      ...UserFragment\n    }\n  }\n  ","\n  ","\n"])),c,u);(0,o.Ps)(m||(m=s(["\n  mutation Register($input: RegisterInput!) {\n    register(input: $input) {\n      ...RegistrationFragment\n    }\n  }\n  ","\n"],["\n  mutation Register($input: RegisterInput!) {\n    register(input: $input) {\n      ...RegistrationFragment\n    }\n  }\n  ","\n"])),l);var f,p,d,m,g,b=(0,o.Ps)(g||(g=s(["\n  query Me {\n    me {\n      ...UserFragment\n    }\n  }\n  ","\n"],["\n  query Me {\n    me {\n      ...UserFragment\n    }\n  }\n  ","\n"])),u);var h=function(e,r,n,t){return new(n||(n=Promise))((function(i,a){function o(e){try{c(t.next(e))}catch(r){a(r)}}function s(e){try{c(t.throw(e))}catch(r){a(r)}}function c(e){var r;e.done?i(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,s)}c((t=t.apply(e,r||[])).next())}))},v=function(e,r){var n,t,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;switch(t=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,t=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=r.call(e,o)}catch(s){a=[6,s],t=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},y=function(e){var r=e.children,n=e.register;return r((function(e,r){var t=r.setErrors,i=r.setSubmitting;return h(void 0,void 0,void 0,(function(){var r,a,o;return v(this,(function(s){switch(s.label){case 0:return[4,n({variables:{input:e},update:function(e,r){var n,t=r.data;e.writeQuery({query:b,data:{me:null===(n=null===t||void 0===t?void 0:t.register)||void 0===n?void 0:n.user}})}})];case 1:return r=s.sent(),a=null===(o=null===r||void 0===r?void 0:r.data)||void 0===o?void 0:o.register.errors,console.log(a),i(!1),a?(t(function(e){var r={};return e.forEach((function(e){var n=e.field,t=e.message;r[n]=t})),r}(a)),[2,!1]):[2,!0]}}))}))}))},j=n(134),O=n(2847),w=n.n(O),x=n(6588),P=n(835),E=n(7729),F=n(7243),R=n(8488),S=n(9532);function _(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_(Object(n),!0).forEach((function(r){(0,F.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var N={big:"py-2 px-6 text-sm rounded-lg",small:"px-2 py-1 text-xs rounded-md"},D={general:"text-button rounded-5 font-semibold transition-colors duration-300 select-none focus:ring-4 outline-no-chrome",variants:{primary:"bg-primary hover:bg-primary-hover disabled:bg-primary-disabled focus:ring-primary"},center:"flex items-center justify-center"},Z=function(e){var r=e.isLoading,n=e.centered,i=e.size,a=e.variant,o=void 0===a?"primary":a,s=e.wrapperClassname,c=void 0===s?"":s,u=e.children,l=(0,R.Z)(e,["isLoading","centered","size","variant","wrapperClassname","children"]),f={wrapper:"".concat(n&&"flex justify-center"," ").concat(c),button:"".concat(D.general," ").concat(D.variants[o]," ").concat(D.center," ").concat(N[i]),loading:r?"opacity-0":null};return(0,t.jsx)("div",{className:f.wrapper,children:(0,t.jsxs)("button",k(k({className:f.button,disabled:r,type:"button"},l),{},{children:[(0,t.jsx)("span",{className:f.loading,children:u}),r?(0,t.jsx)("span",{className:"absolute",children:(0,t.jsx)(S.Z,{})}):null]}))})};function U(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function C(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?U(Object(n),!0).forEach((function(r){(0,F.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var q=function(e){var r=e.children,n=(0,R.Z)(e,["children"]);return(0,t.jsx)("label",C(C({className:M.label},n),{},{children:r}))};function z(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function $(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z(Object(n),!0).forEach((function(r){(0,F.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var M={error:"text-secondary-washed-out mt-1 ml-0.5 text-sm",label:""},I=function(e){var r=e.label,n=e.wrapperClassName,i=e.children,o=(0,R.Z)(e,["label","wrapperClassName","children"]),s=(0,P.U$)(o),c=(0,a.Z)(s,2),u=c[0],l=c[1],f=l.error,p=l.touched;return(0,t.jsxs)(t.Fragment,{children:[r?(0,t.jsx)(q,{htmlFor:u.name,children:r}):null,(0,t.jsxs)("div",{className:n,children:[(0,t.jsx)("input",$($($({className:"w-full border-default border-gray-200 rounded-8 p-2 focus:border-transparent focus:ring-2 ring-pink focus:ring-primary outline-no-chrome"},u),o),{},{id:u.name})),i]}),f&&p?(0,t.jsx)("div",{className:"text-primary mt-1 ml-0.5 text-sm",children:f}):null]})},L=n(194),T=n(5632),V=function(e){var r=e.handleSubmit,n=(0,T.useRouter)();return(0,t.jsxs)("div",{children:[(0,t.jsx)(E.default,{children:(0,t.jsx)("title",{children:"Sign up | Daily"})}),(0,t.jsx)("div",{style:{maxWidth:300},className:"mx-auto",children:(0,t.jsx)(P.J9,{initialValues:{username:"",email:"",password:""},onSubmit:(0,x.Z)(w().mark((function e(){var t,i=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.apply(void 0,i);case 2:t=e.sent,console.log(t),t&&n.push("/");case 5:case"end":return e.stop()}}),e)}))),validationSchema:L.registerSchema,children:function(e){var r=e.isSubmitting,n=e.errors;return(0,t.jsxs)(P.l0,{noValidate:!0,children:[(0,t.jsx)(I,{name:"username",placeholder:"username",label:"Username"}),(0,t.jsx)(I,{name:"email",placeholder:"email",label:"Email",type:"email"}),(0,t.jsx)(I,{name:"password",placeholder:"password",label:"Password",type:"password"}),(0,t.jsx)("div",{className:"text-primary mt-1 ml-0.5 text-sm",children:n.general}),(0,t.jsx)(Z,{size:"big",wrapperClassname:"mt-4",variant:"primary",centered:!0,type:"submit",isLoading:r,children:"Register"})]})}})})]})},B=function(){var e=(0,j.l4)(),r=(0,a.Z)(e,1)[0];return(0,t.jsx)(y,{register:r,children:function(e){return(0,t.jsx)(V,{handleSubmit:e})}})},X=function(e){var r=e.children,n=(0,T.useRouter)(),a=(0,j.UE)(),o=a.data,s=a.loading,c=null===o||void 0===o?void 0:o.me;return(0,i.useEffect)((function(){c&&n.replace("/")}),[s,c]),c?(0,t.jsx)(S.Z,{center:!0,size:"5"}):r},A=(0,n(9258).C)({ssr:!0})((function(){return(0,t.jsx)(X,{children:(0,t.jsx)(B,{})})}))},9532:function(e,r,n){"use strict";var t=n(2322),i=(n(2784),{2:"h-2 w-2",4:"h-4 w-4",5:"h-5 w-5"});r.Z=function(e){var r=e.size,n=void 0===r?"4":r,a=e.center,o=e.color,s=void 0===o?"text-black":o;return(0,t.jsx)("div",{className:"".concat(a?"flex items-center justify-center min-h-full":""),children:(0,t.jsx)("svg",{className:"animate-spin ".concat(s," ").concat(i[n]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})})})}},9258:function(e,r,n){"use strict";n.d(r,{C:function(){return a}});var t=n(6945),i=n(6903),a=(0,n(183).C)((function(e){return console.log("url","http://167.71.64.47/graphql"),new t.f({uri:"http://167.71.64.47/graphql",credentials:"include",headers:{cookie:void 0},cache:new i.h})}))},1088:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return n(7053)}])},194:function(e,r,n){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,r,n,t){void 0===t&&(t=n),Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[n]}})}:function(e,r,n,t){void 0===t&&(t=n),e[t]=r[n]}),i=this&&this.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(r,"__esModule",{value:!0}),i(n(3641),r)},3641:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerSchema=void 0;const t=n(8253),i="must be greater than 2 characters",a="must be less than 50 characters",o="must be less than 30 characters",s="must be at least 3 characters",c="must be less than 255 characters",u="Invalid email";r.registerSchema=t.object().shape({username:t.string().min(2,i).max(30,o).required(),email:t.string().max(50,a).email(u).required(),password:t.string().min(3,s).max(255,c).required()})}},function(e){e.O(0,[170,660,774,888,179],(function(){return r=1088,e(e.s=r);var r}));var r=e.O();_N_E=r}]);